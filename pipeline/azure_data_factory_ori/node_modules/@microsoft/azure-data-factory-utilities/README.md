# Azure Data Factory utilities

This library provides basic functionality to validate and generate an ARM template given a set of Data Factory resources.

Note: As the package is already GA, updated the version to **1.0.0** and there is no breaking change. Please use node version greater than **14.0.0** to avoid failures while running below commands

## Export ARM template

Run `npm run start export <rootFolder> <factoryId> [outputFolder]` to export the ARM template using the resources of a given folder.

- rootFolder is a mandatory field that represents where the Data Factory resources are located.
- factoryId is a mandatory field that represents the Data factory resource id in the format: `/subscriptions/<subId>/resourceGroups/<rgName>/providers/Microsoft.DataFactory/factories/<dfName>`
- outputFolder is an optional parameter that specifies the relative path to save the generated ARM template.

Example(s):
`npm run start export C:\DataFactories\DevDataFactory /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/testResourceGroup/providers/Microsoft.DataFactory/factories/DevDataFactory ArmTemplateOutput`

`npm run start-preview export C:\DataFactories\DevDataFactory /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/testResourceGroup/providers/Microsoft.DataFactory/factories/DevDataFactory ArmTemplateOutput`

- **start-preview** command uses **--preview** flag to get an improved PrePostDeploymentScript.ps1 script that skips stop/start trigger if the trigger is unchanged.

## Validate

Run `npm run start validate <rootFolder> <factoryId>` to validate all the resources of a given folder.

- rootFolder is a mandatory field that represents where the Data Factory resources are located.
- factoryId is a mandatory field that represents the Data factory resource id in the format: `/subscriptions/<subId>/resourceGroups/<rgName>/providers/Microsoft.DataFactory/factories/<dfName>`

Example:
`npm run start validate C:\DataFactories\DevDataFactory /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/testResourceGroup/providers/Microsoft.DataFactory/factories/DevDataFactory`
